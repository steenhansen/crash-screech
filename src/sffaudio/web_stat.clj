(ns sffaudio.web-stat	 (:require [amazonica.aws.dynamodbv2 :as aws-dyn])    (:require [clojure.string :as clj-str])           (:require [edn-config.core :as edn-read])                (:require [overtone.at-at :as at-at])         (:require [compojure.core :refer [defroutes GET]] )  (:require [ring.adapter.jetty :as ring])  (:require [net.cgrand.enlive-html :as html])  (:require [monger.core :as mong-core])             (:require [monger.collection :as mong-coll])     (:require [monger.operators :refer :all])  (:require [clj-http.client :as http-client])        (:use [net.cgrand.moustache :only [app]] ))(comment  "to start" (-main "mongolabs" "localhost")         )(comment  "to start" (-main "amazonica" "localhost")         )(load "config-name")  (load "db-obj")       (load "home-page")    (load "cron-service")  (load "web-service")  ; (defn -tm [];  ( let [ start-args '("mongolabs" "localhost");         [my-db-obj pages-to-check cron-info]  ( db-handle "./scrape-constants.edn" start-args);     (scrape-pages my-db-obj pages-to-check true false test-time-fn)  ;!!! WORKS;   ); )(defn -main [& start-args]        ( let [ constant-file "./scrape-constants.edn"                    ; my-test-objs-a [ {:check-url "www.sffaudio.com"              ;                 :the-date "2019-04-19-01:54:03.818Z"          ;                 :the-html "blah"										; 								        :time-took 1234 }										; 														{:check-url "sffaudio.herokuapp.com_rsd_rss" 		          ;                 :the-date "2019-04-18T01:54:03.819Z"       ;; ((:put-many my-db-obj) my-test-objs-a)          ;                 :the-html "bluhsss"					   		; 										        :time-took 12346 }										; 												 {:check-url "www.sffaudio.com"           ;                 :the-date "2019-05-17-01:54:03.818Z"          ;                 :the-html "blah"										; 								        :time-took 1234 }										; 														{:check-url "sffaudio.herokuapp.com_rsd_rss" 		          ;                 :the-date "2019-05-18T01:54:03.819Z"          ;                 :the-html "bluhsss"					   		; 										        :time-took 12346 } ]       ]    ;((:put-many my-db-obj) my-test-objs-a)            ; (println "***" ((:begins-all my-db-obj) "2019-05") )  (web-init-2 constant-file)    (cron-init-2 constant-file start-args scrape-pages                 {:cron-seconds 1000                  :cron-run-always true                       :cron-save-db false                  :cron-read-real false                  :pages-to-check [ { :check-page "www.sffaudio.com" :enlive-keys[:article :div.blog-item-wrap]  :count-at-least 5}  	                                 { :check-page "sffaudio.herokuapp.com_rsd_rss"  :enlive-keys[:item]                         :count-at-least 5} ] } )     "I am outta web-stat !!!"))    